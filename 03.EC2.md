## EC2:

AWS EC2（Amazon Elastic Compute Cloud）是亚马逊提供的一项云计算服务，它允许用户在亚马逊的数据中心虚拟运行应用程序。

EC2 提供可伸缩的计算能力，使得开发者可以通过网络快速启动虚拟服务器、管理存储、安全和网络配置，以及在需要时扩展或缩减资源，从而优化成本。

EC2 提供了多种服务器实例类型，以适应不同的工作负载和应用程序。比如，有些实例优化了计算性能，有些则优化了内存使用，还有些优化了存储性能等等。

用户可以根据需求选择适当的实例类型，并且可以使用镜像（AMI - Amazon Machine Images）来加载带有所需软件配置的虚拟服务器。

总而言之，AWS EC2 提供的是一种灵活、可控、按需计费的计算资源，适用于从小规模开发测试到大规模生产部署的各种应用场景。

## EC2服务的共享责任模型：

### AWS负责:

基础设施：全球网络安全

物理主机上的隔离

更换有故障的硬件

合规性验证

**操作系统的安装**

### 用户负责:

安全组规则

**操作系统补丁和更新**

在EC2实例上安装的软件和工具

分配给EC2和IAM用户访问管理的IAM角色

实例上的数据安全

## EC2 Instance:

就像是一台你可以随意配置的虚拟电脑。它存在于亚马逊的云端服务器里，你可以通过互联网远程使用它。

你可以告诉亚马逊你需要多大的电脑资源，比如处理器有多强、内存有多大等等，然后亚马逊就会在云端为你提供一台符合这些要求的虚拟电脑。

你可以在这台虚拟电脑上做很多事情，比如运行网站、处理数据、运行应用程序等。

你用不到它的时候可以关掉它，这样就不会产生费用；需要的时候再开机使用，就像平时我们用自己的笔记本电脑一样，只不过这台电脑非常强大，而且是在互联网上。

## EC2种类：

**通用型EC2实例类型**：例如t2.micro，提供了计算、内存和网络资源的平衡。它们适用于各种工作负载，包括Web服务器和代码仓库。

**计算优化型EC2实例类型**：适用于需要高性能处理器的计算密集型任务的实例，如批处理处理工作负载、媒体转码、高性能计算（HPC）、科学建模与机器学习以及专用游戏服务器。

**内存优化型EC2实例类型**：专为处理大型内存数据集的工作负载而设计的实例。使用案例包括高性能数据库，包括关系型和非关系型数据库、分布式大规模Web缓存存储、为BI（商业智能）优化的内存数据库以及实时处理大型非结构化数据。

**存储优化型EC2实例类型**：适用于需要对本地存储上的大型数据集进行高频顺序读写访问的存储密集型任务的实例。列出的使用案例包括高频在线事务处理（OLTP）系统、关系型和NoSQL数据库、数据仓库应用程序以及分布式文件系统。

## EC2购买种类：

| 购买选项     | 英文名称             | 描述                                                   |
|--------------|----------------------|--------------------------------------------------------|
| 按需实例     | On-Demand Instances  | 适用于短期工作负载。价格可预测，按秒计费。             |
| 预留实例     | Reserved Instances   | 长期**承诺**，可获得高折扣。适用于长期工作负载。可选择不同的预付款选项。预留特定实例属性（实例类型，区域，租户，操作系统）。 |
| 现货实例     | Spot Instances       | 提供高达90%的折扣。实例可用性不稳定，适用于**具备容错能力**的工作负载。适用于成本敏感的工作负载，如批处理、数据分析等。 |
| 专用实例     | Dedicated Instances  | 在硬件层面上与其他客户隔离，但可能与同一账户中的其他实例共享硬件资源。没有对实例放置的控制（在停止/启动后可以移动硬件）。 |
| 节省计划     | Savings Plans        | 根据使用情况**承诺**支付费用，与实例类型无关。适合长期工作负载。以低廉的价格提供EC2使用权，作为承诺以每小时的美元金额为单位，持续使用1年或3年。 |
| 专用主机     | Dedicated Hosts      | 预订整个物理服务器。适用于特殊许可要求的工作负载，如软件许可或合规性需求。提供不同的购买选项，包括按需支付和预留购买。 |
| 容量预留     | Capacity Reservations| 预留按需实例容量，用于确保特定可用区有足够的实例容量，无论是否实际运行实例。适合短期、不间断的工作负载，且需要在特定AZ中运行。可以与区域性预留实例和节省计划结合使用，从而受益于计费折扣。 |

## EC2 Image Builder：

用于**自动化创建、维护、验证和测试EC2 AMIs（Amazon Machine Images）**。

可以设置定期运行（比如每周，或者每当软件包更新时）。

这是一个免费服务，用户只需要支付底层资源的费用。

流程包括：创建构建组件、生成新的AMI，并在构建的EC2实例上运行测试套件，最后将AMI分发到多个区域。

## FSx for Windows File Server：

为Windows文件服务器提供完全管理的、高度可靠的、可扩展的Windows本地共享文件系统。

它建立在Windows文件服务器基础上，支持SMB协议和Windows NTFS。

与Microsoft Active Directory集成。

可以从AWS或本地基础设施访问。

## FSx for Lustre：

为高性能计算（HPC）提供的完全管理的、高性能的、可扩展的文件存储。

Lustre这个名字来自于"Linux"和"cluster"。

适用于机器学习、分析、视频处理、金融建模等。

可扩展到数百GB/s的速度，数百万IOPS，以及亚毫秒级的延迟。

## FSx File Gateway：

提供了一种无缝集成本地**NFS存储**与Amazon FSx for Windows文件服务器的方式，允许您将NFS工作负载迁移到AWS

## CLI&SDK

CLI :

是用于在命令行界面上与 AWS 云服务进行交互的工具

**是一个统一的工具，用于管理您的AWS服务。只需下载和配置一个工具，您就可以从命令行控制多个AWS服务，并通过脚本自动化它们**

通过命令行执行 AWS 操作，如创建 EC2 实例、管理 S3 存储桶等。

SDK :

是用于在编程中与 AWS 云服务进行交互的库。

在应用程序中使用 AWS 提供的编程语言库来编写代码以与 AWS 云服务进行通信。

## EFS, EC2 Instance Store, EC2 Image Builder, AMI 

EFS (Elastic File System):
想象一下你的电脑可以让家里的所有人同时使用，而且每个人都可以从他们自己的设备访问和编辑文件。EFS就像是亚马逊云中的一个超级强大的网络驱动器，它允许多个EC2实例（亚马逊的虚拟服务器）同时连接和访问存储在里面的数据。它能够自动伸缩以适应存储的数据量，所以你用多少空间，就付多少钱。

EC2 Instance Store:
这个像是你的游戏机里的存储卡，可以让你的游戏和应用跑得飞快，但是如果你的游戏机坏了或者你决定把它换掉，那上面的数据就都没了。EC2 Instance Store提供的是临时存储，它在你的虚拟服务器（EC2实例）运行时非常快速，但是一旦你关掉这台服务器，存储上的数据就会消失。

EC2 Image Builder:
想象你有一份你喜欢的饼干食谱，你每次按这个食谱都能烤出相同的美味饼干。EC2 Image Builder就是用来制作那个“食谱”的，只不过这里的食谱是为创建亚马逊云服务器的镜像（也就是一个包含了操作系统、软件、配置的预设模板）。你可以用它来创建一个模板，每次都能用这个模板快速制作出一模一样设置的服务器。

AMI (Amazon Machine Image):
这就像是一个智能手机的备份。如果你的手机丢了或者要换新的，你可以用备份来在新手机上复原你所有的应用、照片和设置。AMI就是AWS上的服务器备份，包含了服务器的操作系统、应用程序和所有配置。你可以用AMI来创建新的服务器，新服务器会和原来那台有着一模一样的内容和设置。

## SSH（Secure Shell），IPv4/IPv6，HTTP，UDP/TCP

SSH

用途：SSH用于提供安全的网络服务，主要是远程登录到服务器。

特点：它通过加密来确保连接的安全，避免数据被窃取或篡改。

层级：SSH工作在应用层，为其他协议如SCP（安全复制协议）或SFTP（SSH文件传输协议）提供安全的运输机制。

IPv4/IPv6

用途：这些是互联网协议版本，用于在网络中标识设备，并将数据从一个设备传输到另一个设备。

特点：IPv4是一个32位地址协议，而IPv6是128位，后者提供了更多的地址空间和一些额外的功能，如自动配置和改进的隐私。

层级：它们工作在网络层，负责在网络上路由数据包。

HTTP

用途：HTTP是用于传输网页数据的协议，是Web通信的基础。

特点：HTTP协议明文传输数据，所以本身不提供数据加密，HTTPS是它的安全版本，它使用SSL/TLS来加密HTTP的通信。

层级：HTTP工作在应用层，是一个建立在底层TCP/IP协议之上的协议。

TCP

用途：TCP是一种面向连接的协议，用于在网络中可靠地传输数据。

特点：它确保数据完整性和顺序，通过三次握手建立连接，并使用确认和重传机制确保数据正确送达。

应用：HTTP和SSH通常建立在TCP之上，因为它们需要可靠的数据传输。

UDP

用途：UDP是一种无连接的协议，用于快速传输数据，但不保证可靠性。

特点：它不保证数据包的顺序或可靠到达，没有握手过程，因此延迟较小。

应用：适用于对速度要求高于可靠性的应用，如在线视频或游戏。

关系与区别

关系：TCP和UDP是传输层的协议，它们工作在IPv4/IPv6之上，负责将数据传输到正确的应用进程上。SSH和HTTP是应用层的协议，它们依赖TCP来确保数据的可靠传输（尽管SSH和HTTP都可以配置为使用UDP）。

区别：

TCP vs UDP：TCP保证数据的顺序和完整性，适用于需要可靠性的应用。UDP传输快但不保证可靠性，适用于对实时性要求高的应用。

TCP/UDP vs SSH：SSH是一个应用层协议，提供安全的数据传输，通常使用TCP来保证连接的可靠性。

TCP/UDP vs HTTP：HTTP是建立在TCP上的，用于网页数据的传输，而不是建立在UDP上，因为网页加载通常要求数据完整无误。

TCP/UDP vs IPv4/IPv6：IPv4和IPv6是网络层协议，负责数据包的寻址和路由。TCP和UDP工作在这些协议的上一层，负责确保数据包能够到达正确的应用程序。

在实际的网络通信中，IPv4/IPv6是地址和邮路，TCP或UDP是邮递员的传递方法（TCP像是需要签收确认的挂号信，UDP像是扔进你家信箱的广告邮件），而SSH和HTTP是邮件的内容和邮件上的机密印章（SSH提供安全性，HTTP决定内容的格式）。

## SSH，IPv4/IPv6，HTTP，UDP/TCP分别在什么层

SSH (Secure Shell)：SSH是一种协议，它提供加密的终端会话，用于安全地远程访问另一台计算机。SSH通常运行在应用层，但它是建立在较低层的传输协议之上，通常是TCP。

IPv4/IPv6 (Internet Protocol version 4/6)：这些是网络层协议，用于路由和数据包传输，确保数据可以在网络中的不同节点之间传递。

HTTP (Hypertext Transfer Protocol)：HTTP是应用层协议，用于Web浏览器和服务器之间的通信，传输如网页文本、图片和视频等超媒体信息。

UDP (User Datagram Protocol) 和 TCP (Transmission Control Protocol)：这两种都是传输层协议。TCP提供的是一种面向连接的、可靠的数据传输服务，确保数据按顺序且正确无误地到达。

UDP则提供的是一种无连接的传输服务，它不保证数据包的顺序或可靠性，但是在某些情况下，它比TCP更快。

总结一下，它们在OSI模型中所处的层级如下：

应用层：SSH, HTTP

传输层：UDP, TCP

网络层：IPv4, IPv6

## 总结

EC2 实例：AMI（操作系统）+ 实例大小（CPU + RAM）+ 存储 + 安全组 + EC2 用户数据

安全组：连接到EC2实例的防火墙

EC2 用户数据：在实例首次启动时执行的脚本

SSH：启动终端进入我们的EC2实例（端口22）

EC2 实例角色：链接到IAM角色

购买选项：按需（On-Demand），现货（Spot），预留（Reserved，包括标准和可转换），专用宿主机（Dedicated Host），专用实例（Dedicated Instance）

EBS 卷: 网络驱动器可以一次连接到一个EC2实例，映射到可用区，可以使用EBS快照进行备份/跨AZ传输EBS卷

AMI: 创建包含我们定制内容的现成EC2实例

EC2 图像构建器: 自动构建、测试和分发AMIs

EC2 实例存储: 高性能硬件磁盘连接到我们的EC2实例，如果我们的实例停止/终止，数据将丢失

EFS: 网络文件系统，可以连接到一个区域内的数百个实例

EFS-IA: 为不经常访问的文件优化成本的存储类

FSx for Windows: Windows服务器的网络文件系统

FSx for Lustre: 高性能计算Linux文件系统，这是一个关于亚马逊网络服务（AWS）提供的不同存储选项的总结，特别是围绕EC2（弹性计算云）服务的存储选项。

## 哪种EC2购买选项能提供最大的折扣，但不适合关键任务或数据库？

保留实例（Reserved Instances）

可转换实例（Convertible Instances）

专用宿主机（Dedicated Hosts）

现货实例（Spot Instances）

已选中的答案是现货实例（Spot Instances）

解释：
现货实例通常提供比其他类型购买选项更大的折扣，因为它们允许用户利用AWS上未使用的EC2计算容量，通常以远低于按需价格的成本。

然而，因为现货实例的价格会根据供求关系变化，并且AWS可以在不提前通知的情况下回收这些实例，所以它们不适合运行关键任务或数据库等需要高度可靠性的应用。

## 你可以预订EC2保留实例多长时间？

1年或3年

2年或4年

6个月或1年

1年到3年之间的任何时间

已选中的答案是1年或3年

## 哪种EC2购买选项适合你计划在一台服务器上连续运行1年的应用程序？

预留实例

竞价实例

按需实例

可转换实例

已选择的答案是“预留实例”。

解释：
在亚马逊云计算服务（AWS）中，当你计划在服务器上长期（例如1年）运行一个应用程序时，

预留实例（Reserved Instances）通常是最经济的选择，因为它们提供了较长时间内的定价优惠。

预留实例需要用户做出一定期限（1年或3年）的承诺，并相对于其他选项提供较低的使用成本。

其他选项包括：

竞价实例（Spot Instances）：提供未使用的EC2实例的容量，以市场定价出售，适合可以接受应用程序中断的场景。

按需实例（On-demand Instances）：适用于需要即时访问和无需长期承诺的计算能力的用户。

可转换实例（Convertible Instances）：是一种特殊类型的预留实例，它们允许在合同期内改变实例的属性或换成不同的实例类型。

所以，对于计划连续运行一年的服务器应用程序，选择“预留实例”是正确的。

## AMI不被用于什么？

添加你自己的软件许可

添加你自己的配置

添加你自己的操作系统

添加你自己的IP地址

解释：

AMI，或者说亚马逊机器映像，是AWS中一个预先配置好的虚拟机镜像，可以用来快速启动新的EC2实例。

它包括操作系统（比如Linux, Windows等）以及运行实例所需的其他软件配置和应用程序。

AMI可以用来添加自己的软件许可，确保新的EC2实例拥有正确的软件和许可。

AMI可以用来添加自己的配置，确保实例在启动时就具有所需的配置。

AMI也可以用来添加自己的操作系统，允许用户选择特定的操作系统版本和配置。

然而，IP地址不是AMI的一部分，因为IP地址是在实例启动时由Amazon EC2网络和安全子系统分配的。

你不能在AMI中预设一个IP地址；IP地址是动态分配给实例的，或者可以在启动后通过Elastic IP地址静态分配。
