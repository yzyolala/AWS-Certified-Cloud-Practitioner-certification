## 应用程序通信的两种模式：

同步通信（应用程序到应用程序），通过"购买服务"和"运输服务"的方块显示双向通信。

异步/事件驱动（应用程序到队列到应用程序），其中"购买服务"向"队列"发送消息，然后"运输服务"接收消息，说明了带有队列机制的单向通信。

## 同步通信的问题：

特别是在突然流量激增时。它提出了一个假设情况，即应用程序突然需要编码1000个视频，而平时只有10个。为了解决这种规模问题使用以下方式来解耦应用程序：

SQS（简单队列服务）用于队列模型

SNS（简单通知服务）用于发布/订阅模型

Kinesis 用于实时数据流模型

## SQS：

服务历史悠久：SQS是AWS最早提供的服务之一，已有10多年历史。
完全托管：SQS提供无服务器架构服务，用户无需管理基础设施即可使用。
高可扩展性：支持从每秒1条消息扩展到每秒10000条消息的处理能力。
消息保留期：消息在队列中的默认保留时间为4天，最长可以设置为14天。
无消息数量限制：队列中可以存储无限数量的消息。
消费后删除：消息被消费者读取后会自动从队列中删除。
低延迟：消息的发布和接收延迟非常低，通常小于10毫秒。
水平扩展：消费者可以共享读取消息的负载，并支持水平扩展。
拉取机制：SQS使用基于拉取的系统，消费者需要主动从队列中拉取消息。

使用SQS进行应用程序层之间解耦的方法：

Web服务器：通过PUT操作将请求发送到SQS队列。
视频处理服务：通过轮询SQS队列来接收和处理请求。
自动扩展：通过配置Auto Scaling Group实现服务的自动扩展，以应对负载变化。

SQS的FIFO队列的特性：

消息顺序：保证消息的发送和接收顺序一致，先进先出。
顺序保证：对于需要严格消息顺序的应用程序非常关键。

## SNS 

是一项 AWS 提供的消息通知服务

高可用性、持久性和安全性：SNS 提供持续可靠的消息传递服务。

完全托管的发布/订阅服务：用户无需管理底层的服务器即可使用此服务。

**解耦**服务：允许微服务、分布式系统和无服务器应用程序之间的松散耦合。

推送机制：SNS 使用推送机制将消息直接发送给订阅者。

多接收者：可以将消息发送给多个接收者，不管是直接集成还是通过主题订阅。

发布/订阅模型：发布者发送消息到SNS主题，多个订阅者可以订阅这个主题。

订阅者多样性：订阅者可以是SQS队列、电子邮件地址、Lambda函数、Kinesis Data Firehose服务或是SMS和移动通知。

订阅限制：一个主题可以有高达12,500,000个订阅，总共可以有100,000个主题。

**当使用SQS或SNS时，你会应用到“解耦你的应用程序”原则。这意味着IT系统应该以减少相互依赖的方式设计——一个组件中的变更或故障不应该波及到其他组件**

## Kinesis服务：

Kinesis是**实时大数据流**处理服务。
它是一个托管服务，用于收集、处理和分析实时流数据。

## Amazon MQ的信息：

SQS和SNS是AWS的“云原生”服务，使用AWS专有协议。
传统应用程序运行在本地时可能使用开放协议，如MQTT, AMQP, STOMP, Openwire, WSS。
当迁移到云端时，为了避免重构应用程序以使用SQS和SNS，可以使用Amazon MQ。
**Amazon MQ是一个托管的消息代理服务，支持ActiveMQ和RabbitMQ。**
与SQS和SNS相比，Amazon MQ的可扩展性有限，它运行在服务器上，并可以在多个可用区（Multi-AZ）中进行故障转移。
Amazon MQ同时具备队列功能（类似于SQS）和主题功能（类似于SNS）

## 总结

SQS：是AWS的队列服务，可以保留消息达14天，支持多个生产者和消费者，被用来解耦在AWS中的应用程序。
SNS：是AWS的通知服务，支持多种订阅者（如电子邮件、Lambda、SQS、HTTP、移动应用等），可以向所有订阅者发送所有消息，不保留消息。
Kinesis：是实时数据流服务，具有数据持久性和分析能力。
Amazon MQ：是为ActiveMQ和RabbitMQ在云中提供的托管消息代理服务，支持MQTT和AMQP等协议。
