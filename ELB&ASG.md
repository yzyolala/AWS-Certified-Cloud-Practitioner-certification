## 高可用性与可扩展性 对于 EC2

**垂直扩展**：增加实例大小（扩大/缩小）

从：t2.nano - 0.5G 的 RAM, 1 vCPU

到：u-12tb1.metal - 12.3TB 的 RAM, 448 vCPUs

**水平扩展**：增加实例数量（扩大/缩小）

自动扩展组

负载均衡器

**高可用性**：在多个可用区运行相同应用的实例

自动扩展组多个可用区

负载均衡器多个可用区

##可扩展性 vs 弹性 (vs 敏捷性)

可扩展性：能够通过加强硬件（向上扩展）或增加节点（向外扩展）来适应更大的负载。

弹性：一旦系统是可扩展的，弹性意味着系统可以根据负载进行“自动扩展”。这是“云友好”的：按使用付费，满足需求，优化成本。

敏捷性：（与可扩展性无关 - 分心项）新的 IT 资源只需点击一下，这意味着你将开发者从几周到几分钟内就能获取这些资源的时间缩短。

## AWS（亚马逊网络服务）中三种不同类型的负载均衡器的信息。每种负载均衡器都适用于不同的场景和协议层。

**应用程序负载均衡器（ALB）**:

支持 HTTP/HTTPS/gRPC 协议（第7层）

具有 HTTP路由功能

使用静态DNS（URL）

可以想象成是一位交通警察，在互联网的繁忙路口（你的网站或应用）指挥着访问者（网络流量）去往正确的目的地（你的服务器）。当许多人同时想要访问你的网站或应用时，ALB确保没有任何一个服务器因为太忙而崩溃，通过合理地分配访问者到不同的服务器上。

ALB更聪明的地方在于它可以查看访问者要做什么，比如是查看网页、提交表单还是下载文件，然后它可以根据这些活动将流量发送到最擅长处理它们的服务器。这就好比在一个购物中心内，根据你要买的商品种类，交通警察会指引你去不同的商店。这样，每个请求都被快速有效地处理，用户体验就会非常好。简而言之，ALB帮助确保你的应用运行顺畅，即使在流量很大的时候。

**网络负载均衡器（NLB）**:

支持 TCP/UDP 协议（第4层）

高性能：每秒可以处理数百万请求

通过弹性IP提供静态IP

**网关负载均衡器（GWLB）**:

使用 GENVE 协议在 IP 数据包上（第3层）

将流量路由到你在EC2实例上管理的防火墙

入侵检测

## 什么是http/https/grpc/TCP/UDP 协议/GENVE 协议

| 特性/协议 | HTTP | HTTPS | gRPC | TCP | UDP | GENEVE |
|-----------|------|-------|------|-----|-----|--------|
| **层级** | 应用层 | 应用层 | 应用层 | 传输层 | 传输层 | 数据中心网络 |
| **安全性** | 无 | SSL/TLS | SSL/TLS | 无（可靠性） | 无 | 可变 |
| **连接方式** | 无连接 | 无连接 | 长连接 | 连接导向 | 无连接 | 封装/解封装 |
| **数据传输特性** | 无状态 | 无状态 | 支持流传输 | 可靠、按顺序 | 不可靠、无序 | 高效的多协议传输 |
| **用途** | 网页数据传输 | 加密的网页数据传输 | 微服务架构中的进程间通信 | 可靠的数据传输 | 快速的数据传输，如视频流 | 网络虚拟化和多租户数据中心 |
| **协议基础** | TCP/IP | TCP/IP | HTTP/2 | IP | IP | IP |

HTTP 就像是普通的邮件服务。它把网页内容从一个地方传到另一个地方，但不提供额外的安全措施。如果有人在途中打开了信，你可能永远不会知道。

HTTPS 就是加了保险的邮件服务。它确保了信件在送达过程中不被别人窥视或更改，因为它使用特殊的锁和钥匙（加密技术），只有真正的收件人才能打开。

gRPC 是一种特殊的快递服务，它专为小包裹（或者说数据包）设计，可以更快、更有效地将信息从一个服务发送到另一个服务，还支持收件人和发件人之间的双向对话。

TCP 像是电话网络。它确保通话双方之间建立了稳定的连接，并且每个人说的话都能按照顺序并且完整地被对方听到，就算需要多说几次以确保一切都被明白。

UDP 则像是发短信。你可以快速地发送信息，但不保证对方一定会收到，也不保证短信的顺序。这种方式适合那些不介意偶尔丢失几个字，但需要快速发送的情况。

GENVE 是一种专门的邮件服务，用于处理特殊情况，比如当你要在一个大型企业内部发送很多不同类型的邮件时。GENVE能够包装这些邮件，确保它们通过企业内部复杂的邮件系统正确无误地到达正确的部门。

总之，这些协议就是定义数据如何在网络中传输的规则。HTTP和HTTPS关注的是网页内容的发送；gRPC关注的是服务之间高效的数据交换；TCP是确保数据可靠传输的通信方法；UDP是快速但不那么可靠的通信方法；而GENVE是专为网络虚拟化设计的封装协议。它们各自在互联网的不同层次上工作，确保数据可以在世界各地的计算机之间快速、安全且准确地传输。

