## 多因素认证 - MFA

用户可以访问你的账户，并可能改变配置或删除你的AWS账户中的资源。

你想要保护你的根账户和IAM用户。

MFA = 你知道的密码 + 你拥有的安全设备。

## 用户如何访问AWS？

访问AWS，你有三个选择:

AWS管理控制台（由密码 + MFA保护）

AWS命令行界面（CLI）（由访问密钥保护）

AWS软件开发工具包（SDK）（对于代码，由访问密钥保护）

访问密钥是通过AWS控制台生成的。

用户管理自己的访问密钥。

访问密钥是机密的，就像密码一样。不要分享它们。

访问密钥ID ≈ 用户名

秘密访问密钥 ≈ 密码

## IAM角色

一些AWS服务需要代表你执行操作。

为此，我们会通过IAM角色为AWS服务分配权限。

常见角色:

EC2实例角色

Lambda函数角色

CloudFormation的角色

## IAM安全工具

### IAM凭证报告（账户级别）

列出账户中所有用户及其不同凭证状态的报告。

**公司可以使用IAM凭证报告来审计密码和访问密钥轮换的情况，以确保合规性。**

### IAM访问顾问（用户级别）

访问顾问展示了授予用户的服务权限以及这些服务最后一次被访问的时间。

你可以使用这些信息来修订你的策略。

## IAM指导和最佳实践

除了AWS账户设置之外，不要使用根账户。

一个实体用户对应一个AWS用户。

将用户分配到组，并为组分配权限。

创建强密码策略。

使用并强制执行多因素认证（MFA）。

创建并使用角色为程序访问（CLI/SDK）提供权限。

使用IAM凭证报告和IAM访问顾问审核你的账户权限。

永远不要共享IAM用户和访问密钥。

## IAM的共享责任模型

基础设施（全球网络安全）。

配置和漏洞分析。

合规性验证。

用户、组、角色、策略管理和监控。

在所有账户上启用MFA。

经常轮换你的所有密钥。

使用IAM工具应用适当的权限。

分析访问模式和复查权限。

## 总结

用户：映射到一个实体用户，拥有AWS控制台的密码。

组：只包含用户。

策略：概述用户或组权限的JSON文档。

角色：用于EC2实例或AWS服务。

安全性：MFA + 密码策略。

AWS CLI：使用命令行管理AWS服务。

AWS SDK：使用编程语言管理AWS服务。

访问密钥：使用CLI或SDK访问AWS。

审计：IAM凭证报告和IAM访问顾问。

## 什么是IAM角色的正确定义？

A. 一个IAM实体，定义了一组用于发起AWS服务请求的权限，这些权限将被AWS服务使用

B. 多个组中的IAM用户

C. 密码策略

D. 分配给用户以执行操作的权限

解释各选项：

A. 这个选项是正确的。IAM角色是AWS中的一个实体，它允许您定义一组权限，这些权限不是直接分配给单个用户，而是可以由AWS服务或其他实体在需要时候动态地采用。

B. 这个描述并不特定于IAM角色，而是描述了IAM用户可以属于多个权限组的情况。

C. 密码策略与IAM角色无关，它是用来定义IAM用户账号密码的规则和要求。

D. 这个描述更接近于IAM策略。虽然角色中包含权限，但这个选项没有描述角色可以被AWS服务使用的特性。

因此，正确答案是A。

## 关于IAM用户，哪个答案是不正确的？

A. IAM用户可以属于多个组

B. IAM用户不必属于任何组

C. IAM用户可以有策略分配给他们

D. IAM用户使用根账户凭证访问AWS

解释各选项：

A. 这个陈述是正确的。在AWS IAM中，用户可以被添加到多个组中，每个组可以有不同的权限策略。

B. 这个陈述也是正确的。IAM用户可以独立于组存在，即他们不必一定要属于某个组。

C. 这个陈述是正确的。策略可以直接分配给IAM用户，以定义他们可以或不可以在AWS中执行的操作。

D. 这个陈述是不正确的。IAM用户应该有自己的一套凭证，而不是使用根账户的凭证。根账户凭证是用于AWS账户的最高权限凭证，通常建议仅在必要时使用，并且加以严格保护。

因此，正确答案是D。
